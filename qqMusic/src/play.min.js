function initPlay() {
    cover.addEventListener("touchstart", function () {
        myPlayer.paused ? (myPlayer.play(), timer = setInterval(nowTime, 1e3), this.className = "btn_pause") : (myPlayer.pause(), this.className = "btn_play"), totalTimeDom.innerHTML = changeTime(myPlayer.duration)
    }, !1)
}
function nowTime() {
    currentTimeDom.innerHTML = changeTime(myPlayer.currentTime), playOn.style.webkitTransform = "translateX(" + (100 * (myPlayer.currentTime / myPlayer.duration) || 0) + "%)", showCurrentLrcLine(), isOver()
}
function isOver() {
    myPlayer.ended && (myPlayer.pause(), cover.className = "btn_play")
}
function s2ms(e) {
    return 1e3 * e
}
function changeTime(e) {
    Math.floor(e / 3600);
    var r = Math.floor(e % 3600 / 60), t = Math.floor(e % 60);
    return toZero(r) + ":" + toZero(t)
}
function toZero(e) {
    return 10 > e ? "0" + e : "" + e
}
function MusicJsonCallback(e) {
    var r = e.lyric.unescapeHTML();
    r = r.split("\n");
    for (var t = 0, n = r.length; n > t; t++) {
        var a = r[t].split("]");
        a[0] = a[0].replace(RegExp("\\[", "g"), ""), "" !== a[1] && lrcObj.push({time: a[0], context: a[1]})
    }
    console.log(lrcObj), document.getElementById("lyricDiv").innerHTML = makeLrcHtml(lrcObj)
}
function createJs(e) {
    var r = document.createElement("script");
    r.type = "text/javascript", r.src = e;
    var t = document.getElementsByTagName("head")[0];
    t.appendChild(r)
}
function makeLrcHtml(e) {
    var r = [], t = e;
    if (t) {
        for (var n = 0; t.length > n; n++)r.push('<p id="line_' + n + '">' + t[n].context + "</p>");
        return r.push('<p id="line_' + n + '">(å®Œ)</p>'), r.join("")
    }
    return ""
}
function showCurrentLrcLine() {
    for (var e = 0; lrcObj.length > e; e++)if (s2ms(myPlayer.currentTime) > playTime2ms(lrcObj[e].time) && s2ms(myPlayer.currentTime) < playTime2ms(lrcObj[e + 1].time)) {
        var r = document.getElementById("line_" + e);
        r.className = "current", console.log(e), scrollLrcLine(e)
    }
}
function scrollLrcLine(e) {
    var r;
    e = parseInt(e), 0 > e && (e = 0), r = 24 * -e, lrcDiv.style.webkitTransition = "-webkit-transform 0.3s ease-out", lrcDiv.style.webkitTransform = "translate3d(0px," + r + "px,0px)"
}
function playTime2ms(e) {
    var r = 6e4 * parseInt(e.substring(0, e.indexOf(":")), 10), t = 1e3 * parseInt(e.substring(e.indexOf(":") + 1, e.indexOf(".")), 10), n = parseInt(e.substring(e.indexOf(".") + 1), 10);
    return r + t + n
}
function ms2playTime(e) {
    var r = parseInt(e / 6e4, 10), t = parseInt(e / 1e3 % 60, 10), n = e - 6e4 * r - 1e3 * t;
    return (r > 9 ? "" : "0") + r + ":" + (t > 9 ? "" : "0") + t + "." + (n > 9 ? "" : "0") + n
}
var doc = document, currentTimeDom = doc.getElementById("currentTime"), totalTimeDom = doc.getElementById("totalTime"), myPlayer = doc.getElementById("h5audio_media"), cover = doc.getElementById("cover"), playOn = doc.getElementById("play_on"), lrcDiv = doc.getElementById("lyricDiv");
initPlay(), String.prototype.unescapeHTML = function () {
    var e = document.createElement("div");
    return e.innerHTML = this, e.innerText || e.textNode || ""
};
var lrcObj = [];
createJs("src/lrc.js");